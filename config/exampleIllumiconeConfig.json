/*
    This file is part of Illumicone.

    Illumicone is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Illumicone is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Illumicone.  If not, see <http://www.gnu.org/licenses/>.
*/

/* TODO:  move these to the appropriate configuration files

// Xanadu shop computer
//#define OPC_SERVER_ADDR "192.168.0.17"
//static const std::string patconIpAddress = "192.168.0.17";

// ic-strdrv
//#define OPC_SERVER_ADDR "192.168.69.100"
// ic-patcon
//static const std::string patconIpAddress = "192.168.69.101";

*/

{
    "numberOfStrings" : 36,
    "numberOfPixelsPerString" : 100,

    "opcServerIpAddress": "127.0.0.1",
    "patconIpAddress" : "127.0.0.1",
    "widgetPortNumberBase" : 4200,

    "autoShutoffPeriods" : [
        {   "description" : "test auto shutoff spanning midnight",
            "startDate" : "2017-07-11",
            "startTime" : "23:59",
            "endDate" : "2017-07-12",
            "endTime" : "00:01"
        },
        {   "description" : "daytime shutoff",
            "startDate" : "",
            "startTime" : "06:00",
            "endDate" : "",
            "endTime" : "20:00"
        }
    ],

    "quiescentModePeriods" : [
        {   "description" : "Element 11 Temple burn",
            "startDate" : "2017-07-15",
            "startTime" : "22:00",
            "endDate" : "2017-07-15",
            "endTime" : "23:00",
            "idlePatternName" : "fire"
        },
        {   "description" : "Burning Man Temple burn",
            "startDate" : "2017-09-03",
            "startTime" : "20:00",
            "endDate" : "2017-07-15",
            "endTime" : "21:00",
            "idlePatternName" : "fire"
        }
    ],

    "widgets" : [
        {   "name" : "eye",
            "enabled" : true,
            "generateSimulatedMeasurements" : true,
            "autoInactiveMs" : 500
        },
        {   "name" : "shirleysWeb",
            "enabled" : true,
            "generateSimulatedMeasurements" : false
        },
        {   "name" : "bells",
            "enabled" : true,
            "generateSimulatedMeasurements" : false
        },
        {   "name" : "rainstick",
            "enabled" : false,
            "generateSimulatedMeasurements" : false
        },
        {   "name" : "schroedersPlaything",
            "enabled" : false,
            "generateSimulatedMeasurements" : false
        },
        {   "name" : "triObelisk",
            "enabled" : true,
            "generateSimulatedMeasurements" : true
        },
        {   "name" : "squawkBox",
            "enabled" : false,
            "generateSimulatedMeasurements" : false
        },
        {   "name" : "plunger",
            "enabled" : true,
            "generateSimulatedMeasurements" : true
        },
        {   "name" : "twister",
            "enabled" : false,
            "generateSimulatedMeasurements" : false
        },
        {   "name" : "fourPlay42",
            "enabled" : true,
            "generateSimulatedMeasurements" : true
        },
        {   "name" : "fourPlay43",
            "enabled" : true,
            "generateSimulatedMeasurements" : true
        },
        {   "name" : "buckNorris",
            "enabled" : false,
            "generateSimulatedMeasurements" : false
        }
    ],

    "patterns" : [
        {   "patternName" : "rgbVertical",
            "inputs" : [
                {   "inputName" : "redPosition",
                    "widgetName" : "fourPlay42",
                    "channelNumber" : 0,
                    "measurement" : "position"
                },
                {   "inputName" : "greenPosition",
                    "widgetName" : "fourPlay42",
                    "channelNumber" : 1,
                    "measurement" : "position"
                },
                {   "inputName" : "bluePosition",
                    "widgetName" : "fourPlay42",
                    "channelNumber" : 2,
                    "measurement" : "position"
                },
                {   "inputName" : "width",
                    "widgetName" : "fourPlay42",
                    "channelNumber" : 3,
                    "measurement" : "position"
                }
            ],
            //"widthScaleFactor" : 85,            // 1024 / (numStrings / 3) = 85.33 is the hardcoded value we used with Bells in 2016
            //"maxCyclicalWidth" : 0              // 0 for non-cyclical positions that are explicitly bounded (e.g., 0-1023)
            //"widthResetTimeoutSeconds" : 0      // 0 to disable
            "widthScaleFactor" : 6,             // effectively gear down a rotating widget
            "maxCyclicalWidth" : 12,
            "widthResetTimeoutSeconds" : 10     // reset width to normal after this period of inactivity of the width channel
        },
        {   "patternName" : "horizontalStripe",
            "inputs" : [
                {   "inputName" : "redPosition",
                    "widgetName" : "fourPlay43",
                    "channelNumber" : 0,
                    "measurement" : "position"
                },
                {   "inputName" : "greenPosition",
                    "widgetName" : "fourPlay43",
                    "channelNumber" : 1,
                    "measurement" : "position"
                },
                {   "inputName" : "bluePosition",
                    "widgetName" : "fourPlay43",
                    "channelNumber" : 2,
                    "measurement" : "position"
                },
                {   "inputName" : "width",
                    "widgetName" : "fourPlay43",
                    "channelNumber" : 3,
                    "measurement" : "position"
                }
            ],
            "widthScaleFactor" : 3,             // effectively gear down a rotating widget
            "maxCyclicalWidth" : 20,                // the maximum width when cyclical values are used
            "widthResetTimeoutSeconds" : 10     // reset width to normal after this period of inactivity of the width channel
        },
        {   "patternName" : "sparkle",
            "inputs" : [
                {   "inputName" : "density",
                    "widgetName" : "triObelisk",
                    "channelNumber" : 2,
                    "measurement" : "velocity"
                }
            ],
            "densityScaledownFactor" : 1200,    // 1200 is the equivalent value that we used with Shirley's Web in 2016
            "activationThreshold" : 20          // 20 is what we used with Shirley's Web in 2016
        },
        {   "patternName" : "rainbowExplosion",
            "inputs" : [
                {   "inputName" : "intensity",
                    "widgetName" : "plunger",
                    "channelNumber" : 0,
                    "measurement" : "position"
                }
            ],
            "activationThreshold" : 700,        // 700 is what we used with the second Plunger widget in 2016
            "explosionThreshold" : 40,          // 40 is what we used with the second Plunger widget in 2016
            "accumulatorResetUpperLimit" : 8,   // 8 is what we used with the second Plunger widget in 2016
            "minFizzleFill" : 3,                // 0 is what we implicitly used with the second Plunger widget in 2016
            "maxFizzleFill" : 30,               // 30 is what we used with the second Plunger widget in 2016
            "fillStepSize" : 8,                 // the number of pixels (depth from bottom) to turn on with each fill step
            "fillStepIntervalMs" : 20
        },
        {   "patternName" : "annoyingFlashing",
            "inputs" : [
                {   "inputName" : "intensity",
                    "widgetName" : "eye",
                    "channelNumber" : 0,
                    "measurement" : "position"
                }
            ],
            "flashingTimeoutSeconds" : 1,
            "activationThreshold" : 200         // 300 is a basic LED flashlight from a few feet away
        }
    ]

}
